<!DOCTYPE html>
<html>
<head>
	<title>bin2dec</title>
	<!-- <style>
		#output {
			font-size: 18pt;
			font-weight: bold;
			width: 150px;
			height: 50px;
			text-align: center;
		}
	</style> -->
</head>
<body>
	<div class='app'>
		<!-- Input para binário -->
		<div class='input-container'>
			<label for="bin">Your Binary</label>
			<input type="text"  id='bin' maxlength='8'/>

			<button id='result'>Result</button>
		</div>

		<!-- output para decimal -->
		<div class='output-container'>
			<span>Your Decimal: </span>
			<div id='output'></div>
		</div>
	</div>
</body>

<script type="text/javascript">

	//Selectors
	let bin = document.querySelector('#bin')
	let resultBtn = document.querySelector('#result')
	let outputContainer = document.querySelector('.output-container')
	let output = document.querySelector('#output')

	// Appends:
	outputContainer.appendChild(output)

	resultBtn.onclick = () => {
		if(!isBin(bin.value)){
			alert("Digite um numero binário!!")

			output.innerHTML = ''
			let text = document.createTextNode('Entrada não binária!!')
			output.appendChild(text)
		} else {
			output.innerHTML = ''
			let text = document.createTextNode(binToDec(bin.value))
			output.appendChild(text)
		}
	}

	bin.onchange = () => {
		
	}

	// Binary to Decimal function:
	function binToDec(param) {
		let input = param
		let result = 0

		for(let i=0; i<input.length; i++) {
			//paga um digito:
			let currentBit = parseInt(input.substring(i, i+1), 2)

			//Faz a Potencia para cada digito
			let currentPow = Math.pow(2, input.length - i - 1)

			// digito binário * potencia
			result += currentBit * currentPow
		}
		return result
	}

	//Se tem somente 0's 1's.
	function isBin(strParam) {
		let strInput = strParam

		for(let i=0; i < strInput.length; i++) {
			let intCurrentBit = parseInt(strInput.substring(i, i+1), 2)
			if(intCurrentBit != 0 && intCurrentBit != 1) {
				return false
			}
		}

		return true
	}
</script>

</html>